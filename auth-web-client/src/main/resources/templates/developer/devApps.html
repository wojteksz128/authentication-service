<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <head>
        <title>Zarejestrowane aplikacje</title>
        <script th:replace="developer/fragments/appKeyInfo :: app-key-info-header"></script>
        <link rel="stylesheet" type="text/css" media="screen" th:href="@{/developer/css/main.css}"/>
        <script th:src="@{developer/js/main.js}" defer="defer"></script>
    </head>

    <body th:fragment="content">
        <div class="container">
            <h1>Zarejestrowane aplikacje</h1>
            <!-- Tabela -->
            <!--/*@thymesVar id="apps" type="java.util.List<net.wojteksz128.authservice.service.clientapp.ClientAppDto>"*/-->
            <table class="table table-striped table-hover" th:if="${!apps.isEmpty()}">
                <thead>
                    <tr>
                        <th>Client Id</th>
                        <th>Opis</th>
                        <th>Data rejestracji</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="app : ${apps}" th:onclick="'javascript:openModal(\'/devApp/' + ${app.clientDetailsDto.clientId} + '\', \'#modal-info-holder\', \'#modal-info\');'">
                        <td th:text="${app.clientDetailsDto.clientId}">Test</td>
                        <td th:text="${app.description.substring(0, 50) + (app.description.length > 50 ? '...' : '')}">53333235-e4b4-4807-ad4a-5db00b0a9671</td>
                        <!--/*@thymesVar id="formatter" type="java.time.format.DateTimeFormatter"*/-->
                        <td th:text="${formatter.format(app.createDate)}">2017-12-24 00:00:00</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3">
                            <button class="btn btn-primary btn-new" onclick="openModal('/devApp/new', '#modal-create-holder', '#modal-create')">
                                <span class="glyphicon glyphicon-plus"></span> Dodaj nową aplikację
                            </button>
                        </td>
                    </tr>
                </tfoot>
            </table>
            <div class="alert alert-info" th:if="${apps.isEmpty()}">
                <p>Żadna aplikacja nie została jeszcze zarejestrowana.</p>
                <br/>
                <button class="btn btn-primary btn-new" onclick="openModal('/devApp/new', '#modal-create-holder', '#modal-create')">
                    <span class="glyphicon glyphicon-plus"></span> Dodaj nową aplikację
                </button>
            </div>
        </div>

        <!-- Okna modalne -->
        <div id="modal-create-holder"></div>
        <div id="modal-delete-holder"></div>
        <div id="modal-info-holder"></div>
    </body>

</html>